const _0x42d9e8=_0x4f71;(function(_0x301f37,_0x59f51f){const _0x571448=_0x4f71,_0x3fd3c7=_0x301f37();while(!![]){try{const _0x2b7a77=-parseInt(_0x571448(0x1e5))/0x1*(-parseInt(_0x571448(0x15b))/0x2)+-parseInt(_0x571448(0x175))/0x3*(-parseInt(_0x571448(0x215))/0x4)+parseInt(_0x571448(0x147))/0x5+parseInt(_0x571448(0x137))/0x6*(parseInt(_0x571448(0x13c))/0x7)+parseInt(_0x571448(0x156))/0x8*(parseInt(_0x571448(0x213))/0x9)+-parseInt(_0x571448(0x16d))/0xa+parseInt(_0x571448(0x1bb))/0xb*(-parseInt(_0x571448(0x199))/0xc);if(_0x2b7a77===_0x59f51f)break;else _0x3fd3c7['push'](_0x3fd3c7['shift']());}catch(_0x4a5df3){_0x3fd3c7['push'](_0x3fd3c7['shift']());}}}(_0x2001,0x33ad2));var __defProp=Object[_0x42d9e8(0x148)],__defNormalProp=(_0x41471d,_0x1e1100,_0x28c88f)=>_0x1e1100 in _0x41471d?__defProp(_0x41471d,_0x1e1100,{'enumerable':!![],'configurable':!![],'writable':!![],'value':_0x28c88f}):_0x41471d[_0x1e1100]=_0x28c88f,__name=(_0x2cc3f2,_0x2cbd13)=>__defProp(_0x2cc3f2,_0x42d9e8(0x190),{'value':_0x2cbd13,'configurable':!![]}),__publicField=(_0x1d9f24,_0x1bb1c5,_0x151e39)=>__defNormalProp(_0x1d9f24,typeof _0x1bb1c5!==_0x42d9e8(0x1ad)?_0x1bb1c5+'':_0x1bb1c5,_0x151e39);import{j as _0x288a9b,_ as _0x5c4fdf,b as _0x27c34c,c as _0x44b372,l as _0x4b0578,d as _0x39aa0d,p as _0x4d9c6f}from'./vendor.mjs';import{m as _0x119297,s as _0x499903,u as _0x69751b,g as _0x33a514,t as _0x549107,M as _0x177173,a as _0x47bd8f}from'./FoundryGui.mjs';const _ModuleImporter=class _ModuleImporter{constructor(_0x201ad8){const _0xdab4eb=_0x42d9e8;__publicField(this,_0xdab4eb(0x1b8),''),__publicField(this,_0xdab4eb(0x18d),0x0),__publicField(this,_0xdab4eb(0x174)),__publicField(this,_0xdab4eb(0x114),new Map()),__publicField(this,_0xdab4eb(0x1d5),[]),this['adventure']=_0x201ad8;}async[_0x42d9e8(0x1b6)](_0x5daf33){const _0x4ed674=_0x42d9e8,_0x44882b=await fetch(_0x4ed674(0x1ac)+_0x5daf33);return await _0x44882b['json']();}async[_0x42d9e8(0x21b)](_0x2b073f){const _0x28efac=_0x42d9e8,_0x3aefec=await fromUuid(_0x2b073f);if(!_0x3aefec)return null;return game['actors'][_0x28efac(0x1ab)](_0x3aefec);}async[_0x42d9e8(0x136)](_0x1e5d43){const _0x435c11=_0x42d9e8;if(this[_0x435c11(0x1d5)][_0x435c11(0x185)](_0x1e5d43))return;const _0xf4481d=_0x1e5d43[_0x435c11(0x1f6)]('/');_0xf4481d[_0x435c11(0x14a)]>0x1&&await this['ensureFolderExists'](_0xf4481d[_0x435c11(0x210)](0x0,_0xf4481d[_0x435c11(0x14a)]-0x1)[_0x435c11(0x1a5)]('/'));try{await _0x119297(_0x1e5d43);}catch{}await _0x499903(0x1f4),this['createdFolders']['push'](_0x1e5d43);}async[_0x42d9e8(0x145)](_0x329632,_0x4bf299,_0x1d3cf7){const _0x3c721e=_0x42d9e8,_0x5e78d8=game[_0x3c721e(0x13d)][_0x3c721e(0x1d6)](_0x3c721e(0x177),'basePath'),_0x115a13=_0x288a9b(_0x5e78d8,this[_0x3c721e(0x174)][_0x3c721e(0x219)],_0x329632);return await this['ensureFolderExists'](_0x115a13),await _0x69751b(_0x1d3cf7,_0x115a13,_0x4bf299),_0x288a9b(_0x115a13,_0x4bf299);}async[_0x42d9e8(0x134)](_0x33f4d7,_0x53eabe,_0x46d6d8){const _0x2ae61a=_0x42d9e8;if(_0x46d6d8[_0x2ae61a(0x1ec)]===void 0x0)return await this[_0x2ae61a(0x145)](_0x33f4d7,_0x53eabe,await _0x46d6d8[_0x2ae61a(0x223)]());const _0x4ea853=await new Promise(_0x5bce14=>_0x46d6d8[_0x2ae61a(0x1ec)](_0x2cbf77=>_0x5bce14(_0x2cbf77),_0x2ae61a(0x182)));return await this[_0x2ae61a(0x145)](_0x33f4d7,_0x53eabe,_0x4ea853);}[_0x42d9e8(0x21c)](_0x4a9600){const _0x5e8596=_0x42d9e8,_0x453a44=_0x33a514()[_0x5e8596(0x1c8)](_0x30f0c4=>_0x30f0c4[_0x5e8596(0x219)]!==this[_0x5e8596(0x174)][_0x5e8596(0x219)])[_0x5e8596(0x151)](_0x220801=>_0x220801[_0x5e8596(0x1f3)]['filter'](_0x40d020=>_0x4a9600[_0x5e8596(0x1db)](_0x40d020))[_0x5e8596(0x214)](_0x12f759=>_0x549107[_0x5e8596(0x19a)](_0x220801,_0x12f759))[_0x5e8596(0x1c8)](_0x2cf234=>_0x2cf234!==void 0x0));return _0x453a44==null?void 0x0:_0x453a44[0x0];}async[_0x42d9e8(0x17b)](){const _0x2f86c3=_0x42d9e8;_0x549107[_0x2f86c3(0x1fd)](),ui['notifications'][_0x2f86c3(0x1b0)]=[];}[_0x42d9e8(0x1fa)](_0x416647,_0x3d92f0){const _0x85dfb=_0x42d9e8;_0x416647['text']['content']=_0x416647[_0x85dfb(0x15c)][_0x85dfb(0x146)][_0x85dfb(0x192)](/<h4 data-monster-id="(.*?)">([^<>]+)<\/h4>/g,(_0x209bf9,_0x6c074d,_0x13d257)=>{const _0x54b5a4=_0x85dfb;if(_0x3d92f0['has'](_0x6c074d))return _0x54b5a4(0x1a7)+_0x3d92f0[_0x54b5a4(0x1d6)](_0x6c074d)+']{'+_0x13d257+'}';return console[_0x54b5a4(0x180)](_0x54b5a4(0x1dc)+_0x6c074d+_0x54b5a4(0x1c7)+_0x13d257),_0x209bf9;});}[_0x42d9e8(0x113)](){const _0x91cd=_0x42d9e8,_0x5fedd7=game[_0x91cd(0x13d)][_0x91cd(0x1d6)](_0x91cd(0x177),'basePath'),_0x22d98d=_0x33a514()['flatMap'](_0x4cd3bb=>_0x4cd3bb[_0x91cd(0x1ee)]['map'](_0x370c45=>{const _0x52823c=_0x91cd;var _0x4d9c6e,_0xa165fd;return{'path':_0x288a9b(_0x5fedd7,_0x4cd3bb['prefix'],_0x370c45['name']+_0x52823c(0x183)),'name':(_0x4d9c6e=_0x370c45['canonical'])==null?void 0x0:_0x4d9c6e[_0x52823c(0x190)],'priority':(_0xa165fd=_0x370c45[_0x52823c(0x187)])==null?void 0x0:_0xa165fd['priority']};}));return _0x22d98d;}async[_0x42d9e8(0x149)](_0x124656,_0x309d88,_0x178cb7,_0x379612){const _0x1ccb19=_0x42d9e8;if(_0x309d88){const _0x49b3ea=this['getCanonicalSceneMapping']();for(const _0xffae0c of game[_0x1ccb19(0x1ee)][_0x1ccb19(0x12d)]){const _0x15cde2=_0x49b3ea[_0x1ccb19(0x1c8)](_0x579885=>_0x579885[_0x1ccb19(0x190)]===_0x309d88)[_0x1ccb19(0x1e6)](_0x42f0f5=>_0x42f0f5['path']===_0xffae0c[_0x1ccb19(0x1b4)][_0x1ccb19(0x121)]);if(_0x15cde2&&_0x178cb7>_0x15cde2['priority']){await _0xffae0c[_0x1ccb19(0x19c)]({'img':_0x124656['background'][_0x1ccb19(0x121)],'width':_0x124656[_0x1ccb19(0x186)],'height':_0x124656[_0x1ccb19(0x188)],'background.offsetX':_0x124656[_0x1ccb19(0x1b4)][_0x1ccb19(0x21f)],'background.offsetY':_0x124656[_0x1ccb19(0x1b4)][_0x1ccb19(0x19f)]});const _0x1e7c6a=await _0xffae0c['createThumbnail']();_0xffae0c[_0x1ccb19(0x19c)]({'thumb':_0x1e7c6a[_0x1ccb19(0x1f4)]},{'diff':![]});if(!game[_0x1ccb19(0x13d)][_0x1ccb19(0x1d6)](_0x1ccb19(0x177),_0x1ccb19(0x20d)))return;}else _0x15cde2&&_0x178cb7<_0x15cde2[_0x1ccb19(0x1de)]&&(_0x124656['background']['src']=_0xffae0c[_0x1ccb19(0x1b4)][_0x1ccb19(0x121)],_0x124656[_0x1ccb19(0x186)]=_0xffae0c['width'],_0x124656[_0x1ccb19(0x188)]=_0xffae0c[_0x1ccb19(0x188)],_0x124656[_0x1ccb19(0x1b4)][_0x1ccb19(0x21f)]=_0xffae0c[_0x1ccb19(0x1b4)]['offsetX'],_0x124656[_0x1ccb19(0x1b4)][_0x1ccb19(0x19f)]=_0xffae0c[_0x1ccb19(0x1b4)][_0x1ccb19(0x193)],_0x178cb7=_0x15cde2[_0x1ccb19(0x1de)]);}}const [_0x5f3b5e]=await Scene[_0x1ccb19(0x198)]([_0x124656]);_0x124656[_0x1ccb19(0x129)]=_0x5f3b5e['id'];const _0x23de64=[];for(const _0x29c729 of _0x379612){const _0x5cfdbf=this[_0x1ccb19(0x114)][_0x29c729['id']];if(!_0x5cfdbf)continue;const _0x2368cb=await _0x5cfdbf[_0x1ccb19(0x1dd)]({'x':_0x29c729['x'],'y':_0x29c729['y'],'hidden':!![]});_0x23de64[_0x1ccb19(0x207)](_0x2368cb[_0x1ccb19(0x168)]());}_0x5f3b5e[_0x1ccb19(0x11f)](_0x1ccb19(0x202),_0x23de64);const _0x1f09c5=game[_0x1ccb19(0x1ee)][_0x1ccb19(0x1d6)](_0x5f3b5e['id']);if(_0x1f09c5){const _0x1078c9=await _0x1f09c5[_0x1ccb19(0x222)]();await _0x1f09c5[_0x1ccb19(0x19c)]({'thumb':_0x1078c9[_0x1ccb19(0x1f4)]},{'diff':![]});}return _0x1f09c5;}async[_0x42d9e8(0x1c4)](_0x4952b6,_0x35f7fc){const _0x2d7a96=_0x42d9e8,_0x4db2b0=this[_0x2d7a96(0x21c)](_0x35f7fc['npc']),_0x3e9576=await this[_0x2d7a96(0x21b)](_0x4952b6);if(!_0x3e9576)return null;_0x3e9576['img']=_0x4db2b0!==void 0x0?_0x4db2b0[_0x2d7a96(0x12c)]:_0x35f7fc[_0x2d7a96(0x220)],_0x3e9576[_0x2d7a96(0x15e)][_0x2d7a96(0x194)][_0x2d7a96(0x121)]=_0x4db2b0!==void 0x0?_0x4db2b0[_0x2d7a96(0x15a)]:_0x35f7fc[_0x2d7a96(0x15a)],_0x3e9576[_0x2d7a96(0x14e)]=_0x35f7fc[_0x2d7a96(0x14e)];_0x35f7fc[_0x2d7a96(0x190)]&&(_0x3e9576[_0x2d7a96(0x190)]=_0x35f7fc[_0x2d7a96(0x190)],_0x3e9576[_0x2d7a96(0x15e)][_0x2d7a96(0x190)]=_0x35f7fc[_0x2d7a96(0x190)]);_0x35f7fc[_0x2d7a96(0x13e)]&&_0x3e9576[_0x2d7a96(0x14d)][_0x2d7a96(0x196)][_0x2d7a96(0x1a9)][_0x2d7a96(0x207)](_0x2d7a96(0x13e));_0x35f7fc[_0x2d7a96(0x173)]&&_0x3e9576['system'][_0x2d7a96(0x196)]['value'][_0x2d7a96(0x207)](_0x2d7a96(0x173));_0x3e9576[_0x2d7a96(0x1eb)][_0x2d7a96(0x177)]={'module':this[_0x2d7a96(0x174)][_0x2d7a96(0x219)],'id':_0x35f7fc['id']};const _0x5aedd8=game[_0x2d7a96(0x13d)][_0x2d7a96(0x1d6)](_0x2d7a96(0x177),_0x2d7a96(0x16e));if(!_0x5aedd8){const _0x329777=game[_0x2d7a96(0x142)][_0x2d7a96(0x1d6)](_0x35f7fc[_0x2d7a96(0x216)][_0x2d7a96(0x205)]);_0x329777!==void 0x0&&(_0x3e9576['img']=_0x329777[_0x2d7a96(0x12c)],foundry[_0x2d7a96(0x176)][_0x2d7a96(0x115)](_0x3e9576[_0x2d7a96(0x15e)],_0x329777[_0x2d7a96(0x15a)],{'inplace':!![],'recursive':!![]}));}let _0x2eff27=null;if(!this[_0x2d7a96(0x174)][_0x2d7a96(0x1f2)]){const _0x5eabcb=CONFIG[_0x2d7a96(0x209)][_0x2d7a96(0x118)],_0x46106a=await _0x5eabcb[_0x2d7a96(0x198)]([_0x3e9576],{'fromCompendium':!![]});_0x2eff27=_0x46106a[0x0],this[_0x2d7a96(0x114)][_0x35f7fc['id']]=_0x46106a[0x0];}return _0x4db2b0===void 0x0&&!_0x35f7fc[_0x2d7a96(0x216)][_0x2d7a96(0x138)]()&&_0x549107[_0x2d7a96(0x158)](this[_0x2d7a96(0x174)],_0x35f7fc,{'actor':_0x35f7fc[_0x2d7a96(0x220)],'token':_0x35f7fc[_0x2d7a96(0x15a)]}),_0x2eff27;}async['import'](_0x33b8e3,_0x4f3a13){const _0x1c0ab5=_0x42d9e8;var _0x1e99b0,_0x1ea252;const _0x5d005e=new _0x177173(),_0x2189c3=_0x33b8e3[_0x1c0ab5(0x1f5)][_0x1c0ab5(0x1e6)](_0x521cdc=>_0x521cdc['y']===0x2);if(_0x2189c3===void 0x0)throw new Error(_0x1c0ab5(0x144));const _0x2567d0=_0x2189c3['text']['match'](/paizo\.com( #([0-9]+))?, (.*?) <(.*?@.*?)>, (.*)/);if(!_0x2567d0)throw new Error(_0x1c0ab5(0x144));this[_0x1c0ab5(0x174)][_0x1c0ab5(0x18b)]=_0x4f3a13,this[_0x1c0ab5(0x174)]['preprocess'](_0x33b8e3[_0x1c0ab5(0x1f5)]),await this[_0x1c0ab5(0x174)][_0x1c0ab5(0x1bc)](_0x33b8e3,_0x5d005e,this);const _0x37d873={};for(const [_0x14317d,_0x570d62]of this[_0x1c0ab5(0x174)][_0x1c0ab5(0x17e)]['entries']()){_0x4f3a13(_0x1c0ab5(0x13a)+_0x14317d,_0x14317d/this[_0x1c0ab5(0x174)][_0x1c0ab5(0x17e)]['length']),_0x570d62(_0x33b8e3,(_0x5f5919,_0x546344)=>{const _0x2192fa=_0x1c0ab5;if(_0x37d873[_0x5f5919]===void 0x0)_0x37d873[_0x5f5919]=[];_0x37d873[_0x5f5919][_0x2192fa(0x207)](_0x546344);});}for(let _0x1eda14 in _0x37d873){const _0x53ccf3=this[_0x1c0ab5(0x174)][_0x1c0ab5(0x21d)](_0x37d873[_0x1eda14],_0x5d005e,_0x1eda14);for(const _0x44ebe4 of _0x53ccf3){_0x5d005e[_0x1c0ab5(0x117)][_0x1c0ab5(0x207)](_0x44ebe4);if(_0x1eda14['startsWith'](_0x1c0ab5(0x218)))_0x1eda14=_0x1c0ab5(0x111);}}this['adventure'][_0x1c0ab5(0x17b)](_0x5d005e),_0x549107[_0x1c0ab5(0x1e8)]();const _0x379219=__name((_0x47ca53,_0x3531cd='m')=>{const _0x5e96a7=_0x1c0ab5;let _0x3de05e=void 0x0;return async()=>_0x3de05e||(_0x3de05e=(await Folder['createDocuments']([{'name':this[_0x5e96a7(0x174)][_0x5e96a7(0x1b3)],'type':_0x47ca53,'parent':null,'sorting':_0x3531cd}]))[0x0]);},_0x1c0ab5(0x21e)),_0x287d1a=_0x379219('Scene'),_0x267e82=_0x379219(_0x1c0ab5(0x130)),_0x4e0d0e=_0x379219(_0x1c0ab5(0x209),'a');for(const _0x1d2f7f of this[_0x1c0ab5(0x174)]['combines']){this[_0x1c0ab5(0x174)]['appendJournal'](_0x5d005e,_0x1d2f7f[_0x1c0ab5(0x1c5)],_0x1d2f7f[_0x1c0ab5(0x163)]);}const _0x1651d5=new Map();for(const [_0x5f4f98,_0x123bae]of this[_0x1c0ab5(0x174)][_0x1c0ab5(0x1f3)][_0x1c0ab5(0x15d)]()){_0x4f3a13('Extracting\x20npc\x20'+_0x5f4f98,_0x5f4f98/this['adventure']['npcs']['length']);const _0x20825f=await _0x123bae[_0x1c0ab5(0x15f)](_0x33b8e3,this);if(_0x20825f===void 0x0){console[_0x1c0ab5(0x14b)](_0x1c0ab5(0x17d)+_0x123bae['id']);continue;}if(!this[_0x1c0ab5(0x174)]['noImport']);const [_0x5ce8bc,_0x35cd79]=_0x20825f,_0x48e8cd=await this[_0x1c0ab5(0x1c4)](_0x5ce8bc,{..._0x35cd79,'folder':(await _0x4e0d0e())['id']});if(!_0x48e8cd){_0x48e8cd===void 0x0&&(this[_0x1c0ab5(0x1b8)]+=_0x1c0ab5(0x1c1)+_0x123bae['id']);continue;}for(const _0x149550 of _0x123bae[_0x1c0ab5(0x1f7)]??[]){_0x1651d5['set'](_0x149550,_0x48e8cd['id']);}}for(const _0x4dd10e of _0x5d005e[_0x1c0ab5(0x117)]){this['fixupJournal'](_0x4dd10e,_0x1651d5);}let _0x571e55=0x0,_0x1cfba7=[..._0x5d005e[_0x1c0ab5(0x117)]];const _0x1ce87e=[];for(const _0x3f348e of this[_0x1c0ab5(0x174)][_0x1c0ab5(0x212)]){const _0x2520a4=_0x3f348e['pages'][_0x1c0ab5(0x214)](_0xd8e762=>{const _0x38e3bd=_0x1c0ab5,_0x183269=_0x1cfba7[_0x38e3bd(0x1e6)](_0x3dcf91=>_0x3dcf91[_0x38e3bd(0x1eb)][_0x38e3bd(0x177)]['id']===_0xd8e762['id']);return _0x183269!==void 0x0&&_0xd8e762[_0x38e3bd(0x190)]&&(_0x183269[_0x38e3bd(0x190)]=_0x33b8e3[_0x38e3bd(0x184)](_0xd8e762['name'])),_0x183269;})[_0x1c0ab5(0x1c8)](_0x11a9f0=>_0x11a9f0);_0x1cfba7=_0x1cfba7[_0x1c0ab5(0x1c8)](_0xbc5b3b=>!_0x2520a4[_0x1c0ab5(0x12b)](_0x165b78=>_0x165b78[_0x1c0ab5(0x1eb)]['pdftofoundry']['id']===_0xbc5b3b['flags']['pdftofoundry']['id'])),_0x2520a4[_0x1c0ab5(0x14a)]>0x0&&_0x1ce87e['push']({'name':_0x33b8e3['decodeEncodedString'](_0x3f348e[_0x1c0ab5(0x190)]),'pages':_0x2520a4});}_0x1cfba7[_0x1c0ab5(0x14a)]>0x0&&_0x1ce87e[_0x1c0ab5(0x207)]({'pages':_0x1cfba7,'name':this['adventure']['fullName']});for(const {pages:_0x21c0d2,name:_0x1c7400}of _0x1ce87e){_0x571e55+=0x64;const _0x3233a1={'name':_0x1c7400,'folder':(await _0x267e82())['id'],'sort':_0x571e55,'permission':{'default':0x0},'pages':_0x21c0d2['map'](_0x3eb743=>({..._0x3eb743}))},_0x2b60a8=await JournalEntry['createDocuments']([_0x3233a1]);for(let _0x387fc9=0x0;_0x387fc9<_0x21c0d2['length'];_0x387fc9++){_0x21c0d2[_0x387fc9][_0x1c0ab5(0x203)]=_0x2b60a8[0x0]['id'],_0x21c0d2[_0x387fc9]['journalPageId']=_0x2b60a8[0x0][_0x1c0ab5(0x17e)][_0x1c0ab5(0x12d)][_0x387fc9]['id'];}}let _0x13c5cc=0x0,_0x2128e9=void 0x0;for(const [_0x1ecc24,_0xedee92]of this[_0x1c0ab5(0x174)][_0x1c0ab5(0x1ee)]['entries']()){_0x4f3a13(_0x1c0ab5(0x224)+_0x1ecc24,_0x1ecc24/this[_0x1c0ab5(0x174)]['scenes'][_0x1c0ab5(0x14a)]);try{const _0x461656=await _0xedee92[_0x1c0ab5(0x15f)](_0x33b8e3,_0x5d005e,this);if(_0x461656===void 0x0)continue;_0x13c5cc+=0x64;const _0x4cc403=await this['createScene']({..._0x461656,'sort':_0x13c5cc,'folder':(await _0x287d1a())['id']},(_0x1e99b0=_0xedee92[_0x1c0ab5(0x187)])==null?void 0x0:_0x1e99b0[_0x1c0ab5(0x190)],(_0x1ea252=_0xedee92['canonical'])==null?void 0x0:_0x1ea252[_0x1c0ab5(0x1de)],_0xedee92[_0x1c0ab5(0x1b1)]);_0x2128e9=_0x2128e9??_0x4cc403;}catch(_0x56b968){console[_0x1c0ab5(0x14b)](_0x56b968);}}this[_0x1c0ab5(0x17b)](),_0x2128e9!==void 0x0&&await _0x2128e9['activate'](),_0x4f3a13('Complete.\x20Enjoy!',0x1);}};__name(_ModuleImporter,_0x42d9e8(0x195));let ModuleImporter=_ModuleImporter;const _PdfData=class _PdfData{constructor(_0x3d07d1){const _0x936a05=_0x42d9e8;__publicField(this,_0x936a05(0x1d7)),__publicField(this,_0x936a05(0x1f5)),Object[_0x936a05(0x201)](this,_0x3d07d1);}[_0x42d9e8(0x112)](_0x2af7a7){const _0x104511=_0x42d9e8;let _0x4af552='',_0x43a6ba=_0x2af7a7;while(_0x43a6ba[_0x104511(0x14a)]>0x0){let _0x563f9b=![];for(let _0xf2884e=_0x43a6ba[_0x104511(0x14a)];_0xf2884e>0x0;_0xf2884e--){const _0x12c7d9=_0x43a6ba[_0x104511(0x120)](0x0,_0xf2884e);let _0x28d3ca=void 0x0;if(_0xf2884e===0x1)_0x28d3ca=_0x12c7d9;for(const _0x4075f0 of this[_0x104511(0x1f5)]){const _0x4025f1=_0x4075f0[_0x104511(0x15c)]['toLocaleLowerCase']()[_0x104511(0x19d)](_0x12c7d9[_0x104511(0x191)]());if(_0x4025f1!==-0x1){const _0x8d6a01=_0x4075f0[_0x104511(0x15c)]['substring'](_0x4025f1,_0x4025f1+_0xf2884e);let _0x237827=void 0x0;if(_0x8d6a01===_0x12c7d9)_0x237827='{'+_0x4075f0['id']+':'+_0x4025f1+':'+(_0x4025f1+_0xf2884e)+'}';else{if(this[_0x104511(0x128)](_0x8d6a01)===_0x12c7d9)_0x237827='{'+_0x4075f0['id']+':'+_0x4025f1+':'+(_0x4025f1+_0xf2884e)+_0x104511(0x1a8);else{if(_0x8d6a01[_0x104511(0x124)]()===_0x12c7d9)_0x237827='{'+_0x4075f0['id']+':'+_0x4025f1+':'+(_0x4025f1+_0xf2884e)+_0x104511(0x140);else{if(_0x8d6a01[_0x104511(0x191)]()===_0x12c7d9)_0x237827='{'+_0x4075f0['id']+':'+_0x4025f1+':'+(_0x4025f1+_0xf2884e)+_0x104511(0x16a);else{const _0x494a06=[...Array(_0x12c7d9['length'])[_0x104511(0x221)]()][_0x104511(0x1c8)](_0x431cd8=>_0x12c7d9[_0x431cd8]===_0x12c7d9[_0x431cd8]['toLocaleUpperCase']());_0x237827='{'+_0x4075f0['id']+':'+_0x4025f1+':'+(_0x4025f1+_0xf2884e)+':'+_0x494a06['join'](',')+'}';}}}}if(_0x28d3ca===void 0x0||_0x237827[_0x104511(0x14a)]<_0x28d3ca[_0x104511(0x14a)])_0x28d3ca=_0x237827;}}if(_0x28d3ca){_0x4af552+=_0x28d3ca,_0x43a6ba=_0x43a6ba[_0x104511(0x120)](_0xf2884e),_0x563f9b=!![];break;}}if(!_0x563f9b)break;}return _0x4af552;}[_0x42d9e8(0x184)](_0x4e3b28){return _0x4e3b28['replace'](/\{([^}]*):([^}]*):([^}]*)(:([^}]*))?\}/g,_0xed3863=>{const _0x1c5cbb=_0x4f71,_0x37b413=_0xed3863[_0x1c5cbb(0x120)](0x1,_0xed3863[_0x1c5cbb(0x14a)]-0x1)[_0x1c5cbb(0x1f6)](':'),_0x1a45ee=this[_0x1c5cbb(0x1f5)][_0x1c5cbb(0x1e6)](_0x37c57d=>_0x37c57d['id']===_0x37b413[0x0]);if(!_0x1a45ee)return'';let _0x28b859=_0x1a45ee[_0x1c5cbb(0x15c)][_0x1c5cbb(0x120)](Number(_0x37b413[0x1]),Number(_0x37b413[0x2]));if(_0x37b413['length']>=0x4&&_0x37b413[0x3]==='L')_0x28b859=_0x28b859['toLocaleLowerCase']();else{if(_0x37b413[_0x1c5cbb(0x14a)]>=0x4&&_0x37b413[0x3]==='U')_0x28b859=_0x28b859[_0x1c5cbb(0x124)]();else{if(_0x37b413['length']>=0x4&&_0x37b413[0x3]==='S')_0x28b859=this[_0x1c5cbb(0x128)](_0x28b859);else{if(_0x37b413[_0x1c5cbb(0x14a)]>=0x4){const _0x37f938=_0x37b413[0x3]['split'](',');_0x28b859=[...Array(_0x28b859[_0x1c5cbb(0x14a)])[_0x1c5cbb(0x221)]()]['map'](_0x5878a3=>_0x37f938[_0x1c5cbb(0x1e6)](_0x2989d0=>_0x2989d0===''+_0x5878a3)?_0x28b859[_0x5878a3][_0x1c5cbb(0x124)]():_0x28b859[_0x5878a3])[_0x1c5cbb(0x1a5)]('');}}}}return _0x28b859;});}['sentenceCase'](_0x10efce){const _0x47e2e8=_0x42d9e8;return _0x10efce[_0x47e2e8(0x1f6)]('\x20')['map'](_0x704cc=>_0x704cc['length']>0x1?_0x704cc[0x0][_0x47e2e8(0x1a2)]()+_0x704cc[_0x47e2e8(0x1d1)](0x1)[_0x47e2e8(0x208)]():_0x704cc)[_0x47e2e8(0x1a5)]('\x20')[_0x47e2e8(0x116)]();}[_0x42d9e8(0x13f)](_0x25dc31){const _0x5f43ec=_0x42d9e8,_0xc8a098=this[_0x5f43ec(0x1f5)]['find'](_0x42f834=>_0x42f834[_0x5f43ec(0x189)]===_0x25dc31[_0x5f43ec(0x189)]&&Math[_0x5f43ec(0x1bd)](_0x42f834['x']-_0x25dc31['x'])<0x1&&Math[_0x5f43ec(0x1bd)](_0x42f834['y']-_0x25dc31['y'])<0x1);if(!_0xc8a098)return'';let _0x46d80b=_0xc8a098[_0x5f43ec(0x15c)];return _0x25dc31[_0x5f43ec(0x120)]!==void 0x0&&(_0x46d80b=_0x46d80b[_0x5f43ec(0x120)](_0x25dc31[_0x5f43ec(0x120)][_0x5f43ec(0x18a)],_0x25dc31[_0x5f43ec(0x120)][_0x5f43ec(0x1cc)])),(_0x25dc31[_0x5f43ec(0x128)]===void 0x0||_0x25dc31['sentenceCase']===!![])&&(_0x46d80b=this['sentenceCase'](_0x46d80b)),_0x46d80b;}[_0x42d9e8(0x13b)](_0xd41d59){const _0x9bfa60=_0x42d9e8,_0x5c844b=this[_0x9bfa60(0x1f5)][_0x9bfa60(0x1e6)](_0x570364=>_0x570364['id']===_0xd41d59);if(!_0x5c844b)return'';return _0x5c844b[_0x9bfa60(0x15c)];}};__name(_PdfData,_0x42d9e8(0x1e0));function _0x2001(){const _0xecf9e0=['flags','toBlob','#loading-bar','scenes','getImageCanvas','any','\x20\x20\x20\x20setStrokeRGBColor\x20-\x20','noImport','npcs','thumb','textDetails','split','forIds','paintImageXObject','lineWidth','fixupJournal','application/json','constructPath','uploadTokenArt','endGroup','fillRGBColor','getFontDetails','assign','Token','journalId','numPages','uniqueKey','translate','push','toLowerCase','Actor','setFillRGBColor','setFont','createImageData','alwaysCreateScenes','stringify','startsWith','slice','])\x20','journalPages','3033peGlvW','map','26396jSTOoO','npc','failed\x20to\x20detect\x20pdf.\x20cannot\x20proceed.','sidebar','prefix','bitmap','fromUuid','getCanonicalArtForToken','extractDetails','lazyFolder','offsetX','img','keys','createThumbnail','toBuffer','Extracting\x20scene\x20','Sidebars','createEncodedStringFromText','getCanonicalSceneMapping','npcActors','mergeObject','trim','journalEntries','documentClass','fill','trimEnd','workerSrc','abort','argsArray','import','createEmbeddedDocuments','substring','src','wordSpacing','textContinuation','toLocaleUpperCase','currentTextLineMatrix','readUploadedFileAsText','padStart','sentenceCase','_id','Error:\x20','some','actor','contents','Problem\x20parsing\x20input\x20file.','setLeadingMoveText','JournalEntry','Your\x20import\x20of\x20','setGState','\x20\x20\x20\x20restore\x20-\x20','emitImage','charSpacing','ensureFolderExists','54EImprN','isPlaceholderArt','fontId','Extracting\x20page\x20','getTextById','229523hBdQlJ','settings','elite','getText',':U}','PDF\x20to\x20Foundry','compendiumArt','moveText','Couldn\x27t\x20detect\x20watermark\x20:(.\x20Please\x20no\x20pirate.','emitFile','content','418235CVuigo','defineProperty','createScene','length','error','\x20\x20\x20\x20constructPath\x20-\x20','system','folder','drawImage','#context','flatMap','clip','\x20\x20\x20\x20beginGroup\x20-\x20','data','onerror','2392FcubbW','Could\x20not\x20detect\x20PDF\x20to\x20import.\x20PDF\x20to\x20Foundry\x20only\x20supports\x20importing\x20adventures\x20that\x20it\x20has\x20been\x20programmed\x20to\x20support.\x20For\x20a\x20list\x20of\x20supported\x20adventures,\x20please\x20see\x20the\x20import\x20dialog.','setTokenArt','ensureId','token','218bqrsNp','text','entries','prototypeToken','generate','baseFontSize','textContent','commonObjs','dest','set','save','block','getOperatorList','toObject','fontName',':L}','rotate','fillStyle','1257660dOuigb','alwaysUseImportedIcons','gstate','setCharSpacing','strokeRGBColor','\x20\x20\x20\x20setTextMatrix\x20','weak','adventure','3FdxOpy','utils','pdftofoundry','from','path','userId','finalize','restore','PDFToFoundry\x20|\x20There\x20wasn\x27t\x20an\x20npc\x20to\x20import\x20for\x20','pages','currentTextMatrix','log','reduce','image/webp','.webp','decodeEncodedString','includes','width','canonical','height','page','start','progressFn','round','sceneSort','parsePdf','image','name','toLocaleLowerCase','replace','offSetY','texture','ModuleImporter','traits','#progress','createDocuments','36NyrBTk','getTokenArt','unknown\x20kind\x20of\x20image\x20:(\x20:(\x20:(','update','indexOf','fillRect','offsetY','result','setTextMatrix','toUpperCase','readUploadedFileAsBinary','\x20-\x20','join','setWordSpacing','@Actor[',':S}','value','parse','fromCompendium','/modules/pdftofoundry/','symbol','Couldn\x27t\x20detect\x20watermark.\x20PDF\x20to\x20Foundry\x20will\x20only\x20import\x20officially\x20licensed\x20adventures.','showText','queue','tokens','setLineWidth','fullName','background','getContext','fetchJson','paintJpegXObject','additionalMessages','\x20\x20\x20\x20transform\x20-\x20','\x20-\x20\x22','1762937wpNvzi','extractImageJournals','abs','message','kind','white','<br>Failed\x20importing\x20','onload','beginGroup','importActor','source','unicode','\x20:\x20','filter','\x20\x20\x20\x20setFillRGBColor\x20-\x20','toString','getPage','end','clamp','leading','hidden','getElementById','substr','\x20\x20\x20\x20endGroup\x20-\x20','\x20\x20\x20\x20setLeadingMoveText\x20','readAsText','createdFolders','get','imageDetails','transform','fontMatrix','nextLine','shouldBeReplacedByArt','PDFToFoundry\x20|\x20Couldn\x27t\x20find\x20actor\x20for\x20','getTokenDocument','priority','readAsArrayBuffer','PdfData','],\x20','Fetching\x20page\x20','style','\x20\x20\x20\x20setGState\x20-\x20','3047KrvraB','find','renderToCanvasFn','eagerLoad','fnArray','setStrokeRGBColor'];_0x2001=function(){return _0xecf9e0;};return _0x2001();}let PdfData=_PdfData;function log(_0x2af440){}__name(log,_0x42d9e8(0x180));async function parsePdf(_0x3e4a48,_0x376800,_0x2a6a09){const _0x153217=_0x42d9e8,_0xaced8=_0x5c4fdf(_0x3e4a48),_0x48d8b9=await _0xaced8['promise'],_0x4837fd=[],_0x1ad58f=[],_0x198638=new Set();let _0x562860=0x1;const _0xe67a5d=Array(_0x48d8b9[_0x153217(0x204)])[_0x153217(0x119)](0x1)[_0x153217(0x214)]((_0x42e0a5,_0x56880b)=>_0x42e0a5+_0x56880b);for(let _0x4ec28c=0x0;_0x4ec28c<_0xe67a5d['length'];_0x4ec28c++){const _0x2a0d7b=_0xe67a5d[_0x4ec28c];_0x376800(_0x153217(0x1e2)+_0x2a0d7b,_0x4ec28c/_0xe67a5d[_0x153217(0x14a)]);const _0x379152=await _0x48d8b9[_0x153217(0x1cb)](_0x2a0d7b),_0x451685=await _0x379152[_0x153217(0x167)]({'intent':_0x153217(0x1f0)}),_0x2a33c0=_0x562860;let _0x8975ab=![];const _0x37bdf5=[],_0x45714f=__name(_0x1b2409=>{const _0xf25d86=_0x153217;let _0x21bbdd=_0x1b2409,_0x582d6f=[0x1,0x0,0x0,0x1,0x0,0x0];try{const _0x59a23d=_0x379152[_0xf25d86(0x162)][_0xf25d86(0x1d6)](_0x1b2409);_0x21bbdd=_0x59a23d[_0xf25d86(0x190)];if(_0x59a23d[_0xf25d86(0x1d9)])_0x582d6f=_0x59a23d[_0xf25d86(0x1d9)];}catch{}const _0x51cd5e=_0x1b2409[_0xf25d86(0x19d)]('+');if(_0x51cd5e!==-0x1)_0x21bbdd=_0x1b2409[_0xf25d86(0x120)](_0x51cd5e+0x1);return[_0x21bbdd,_0x582d6f];},_0x153217(0x200)),_0x2e99fe=Object['entries'](_0x27c34c)[_0x153217(0x181)]((_0x59bcbb,_0x535250)=>{const [_0x38ee1e,_0x1ea908]=_0x535250;return _0x59bcbb[_0x1ea908]=_0x38ee1e,_0x59bcbb;},{}),_0x326258={'fontName':'','baseFontSize':0x1,'currentTextMatrix':[0x1,0x0,0x0,0x1,0x0,0x0],'currentTextLineMatrix':[0x1,0x0,0x0,0x1,0x0,0x0],'fillRGBColor':'','strokeRGBColor':'','lineWidth':0x0,'leading':0x0,'charSpacing':0x0,'wordSpacing':0x0,'gstate':{},'transform':[0x1,0x0,0x0,0x1,0x0,0x0],'path':[],'clip':[],'fontMatrix':[0x1,0x0,0x0,0x1,0x0,0x0],'textContinuation':![]},_0x305d54=[];let _0x482ed6=_0x326258;const _0x143dd9=__name((_0x34392a,_0x46f028)=>{const _0x1fb840=_0x153217;_0x482ed6[_0x1fb840(0x125)][0x4]+=_0x34392a*_0x482ed6[_0x1fb840(0x125)][0x0],_0x482ed6[_0x1fb840(0x125)][0x5]+=_0x46f028*_0x482ed6[_0x1fb840(0x125)][0x3],_0x482ed6['currentTextMatrix']=[..._0x482ed6[_0x1fb840(0x125)]],_0x482ed6[_0x1fb840(0x123)]=![];},_0x153217(0x143));for(let _0x132a45=0x0;_0x132a45<_0x451685[_0x153217(0x1e9)][_0x153217(0x14a)];_0x132a45++){const _0x3d94d9=_0x451685[_0x153217(0x11d)][_0x132a45],_0x6760d9=_0x2e99fe[_0x451685[_0x153217(0x1e9)][_0x132a45]];switch(_0x451685[_0x153217(0x1e9)][_0x132a45]){case _0x27c34c[_0x153217(0x1a1)]:log(_0x153217(0x172)+JSON[_0x153217(0x20e)](_0x3d94d9)),_0x482ed6[_0x153217(0x125)]=_0x3d94d9,_0x482ed6[_0x153217(0x17f)]=[..._0x482ed6['currentTextLineMatrix']];break;case _0x27c34c[_0x153217(0x20b)]:[_0x482ed6[_0x153217(0x169)],_0x482ed6[_0x153217(0x160)]]=_0x3d94d9,[_0x482ed6['fontName'],_0x482ed6[_0x153217(0x1d9)]]=_0x45714f(_0x482ed6[_0x153217(0x169)]),_0x482ed6[_0x153217(0x169)]=_0x482ed6['fontName'][_0x153217(0x192)](/[^+]+\+/,'');break;case _0x27c34c[_0x153217(0x1af)]:{const _0x359d61=_0x3d94d9[0x0][_0x153217(0x214)](_0x5a5f3d=>_0x5a5f3d[_0x153217(0x1c6)])[_0x153217(0x1a5)](''),_0x4df8e0=_0x3d94d9[0x0][_0x153217(0x214)](_0x331cad=>_0x331cad[_0x153217(0x186)]??0x0)[_0x153217(0x181)]((_0x1f5b37,_0x10f24b)=>_0x1f5b37+_0x10f24b,0x0),_0x15382c=_0x3d94d9[0x0][_0x153217(0x214)](_0x11fda8=>_0x11fda8['isSpace']??0x0)['reduce']((_0x9f5fc5,_0x541d49)=>_0x9f5fc5+_0x541d49,0x0),_0x2803b7=_0x482ed6['currentTextMatrix'][0x2],_0x2cc691=_0x482ed6['currentTextMatrix'][0x3],_0x31399c=Math['sqrt'](_0x2803b7*_0x2803b7+_0x2cc691*_0x2cc691),_0x284037=_0x482ed6[_0x153217(0x160)]*_0x31399c,_0x463402=_0x482ed6[_0x153217(0x169)]+':'+_0x284037,_0x3efa92=_0x482ed6['currentTextMatrix'][0x4],_0x49f853=_0x482ed6[_0x153217(0x17f)][0x5];log('(['+_0x3efa92+',\x20'+_0x49f853+_0x153217(0x1e1)+_0x482ed6[_0x153217(0x169)]+':'+_0x284037+_0x153217(0x1a4)+_0x482ed6[_0x153217(0x1ff)]+'/'+_0x482ed6[_0x153217(0x171)]+'/'+_0x482ed6['lineWidth']+'\x20['+_0x482ed6[_0x153217(0x135)]+'\x20/\x20'+_0x482ed6[_0x153217(0x122)]+_0x153217(0x211)+_0x4df8e0+'/'+_0x15382c+_0x153217(0x1ba)+_0x359d61+'\x22');const _0x412eab=ensureId(_0x198638,_0x461ccd=>_0x2a33c0+':'+Math[_0x153217(0x18c)](_0x3efa92)+':'+Math[_0x153217(0x18c)](_0x49f853)+(_0x461ccd>0x0?':'+_0x461ccd:''));if(_0x49f853===0x2)_0x8975ab=!![];const _0x15c6be=_0x4837fd[_0x153217(0x14a)]>0x0&&_0x4837fd[_0x4837fd[_0x153217(0x14a)]-0x1]['text']===_0x359d61;if(!_0x15c6be&&_0x284037>0x4){if(_0x482ed6[_0x153217(0x123)]&&_0x359d61[_0x153217(0x116)]()===''&&_0x463402===_0x4837fd[_0x4837fd[_0x153217(0x14a)]-0x1][_0x153217(0x139)])_0x4837fd[_0x4837fd[_0x153217(0x14a)]-0x1][_0x153217(0x15c)]=_0x4837fd[_0x4837fd[_0x153217(0x14a)]-0x1][_0x153217(0x15c)][_0x153217(0x11a)]()+_0x359d61;else _0x359d61['trim']()!==''&&_0x4837fd[_0x153217(0x207)]({'text':_0x359d61,'fontId':_0x463402,'fontName':_0x482ed6['fontName'],'fontSize':_0x284037,'color':_0x482ed6[_0x153217(0x1ff)],'isLeftAligned':![],'isIndented':![],'page':_0x2a33c0,'x':_0x3efa92,'y':_0x49f853,'id':btoa(_0x412eab)[_0x153217(0x192)](/=/g,'')});}_0x482ed6['currentTextMatrix'][0x4]+=(_0x4df8e0*_0x482ed6[_0x153217(0x1d9)][0x0]+_0x359d61[_0x153217(0x14a)]*_0x482ed6[_0x153217(0x135)]+_0x15382c*_0x482ed6['wordSpacing'])*_0x482ed6[_0x153217(0x17f)][0x0],_0x482ed6['textContinuation']=!![];break;}case _0x27c34c['beginText']:break;case _0x27c34c['endText']:break;case _0x27c34c[_0x153217(0x143)]:_0x143dd9(_0x3d94d9[0x0],_0x3d94d9[0x1]);break;case _0x27c34c[_0x153217(0x170)]:_0x482ed6[_0x153217(0x135)]=_0x3d94d9[0x0];break;case _0x27c34c[_0x153217(0x1a6)]:_0x482ed6[_0x153217(0x122)]=_0x3d94d9[0x0];break;case _0x27c34c[_0x153217(0x12f)]:log(_0x153217(0x1d3)+JSON[_0x153217(0x20e)](_0x3d94d9)),_0x482ed6[_0x153217(0x1ce)]=-_0x3d94d9[0x1],_0x143dd9(_0x3d94d9[0x0],_0x3d94d9[0x1]);break;case _0x27c34c[_0x153217(0x1da)]:_0x143dd9(0x0,-_0x482ed6['leading']);break;case _0x27c34c['save']:log('\x20\x20\x20\x20save\x20-\x20'+JSON[_0x153217(0x20e)](_0x482ed6)),_0x305d54['push'](JSON[_0x153217(0x1aa)](JSON[_0x153217(0x20e)](_0x482ed6)));break;case _0x27c34c[_0x153217(0x17c)]:_0x482ed6=_0x305d54['pop'](),log(_0x153217(0x133)+JSON[_0x153217(0x20e)](_0x482ed6));break;case _0x27c34c[_0x153217(0x1b7)]:case _0x27c34c[_0x153217(0x1f8)]:log('\x20\x20\x20\x20'+_0x6760d9+_0x153217(0x1a4)+JSON[_0x153217(0x20e)](_0x3d94d9)),_0x37bdf5['push']({'image':_0x3d94d9[0x0],'gstate':_0x482ed6[_0x153217(0x16f)],'transform':_0x482ed6['transform'],'clip':_0x482ed6[_0x153217(0x152)]});break;case _0x27c34c[_0x153217(0x20a)]:_0x482ed6[_0x153217(0x1ff)]='#'+Array[_0x153217(0x178)](_0x3d94d9)[_0x153217(0x214)](_0x31d9d2=>_0x31d9d2[_0x153217(0x1ca)](0x10)[_0x153217(0x127)](0x2,'0'))[_0x153217(0x1a5)](''),log(_0x153217(0x1c9)+JSON[_0x153217(0x20e)](_0x3d94d9));break;case _0x27c34c[_0x153217(0x1ea)]:_0x482ed6['strokeRGBColor']='#'+Array[_0x153217(0x178)](_0x3d94d9)[_0x153217(0x214)](_0x41389d=>_0x41389d[_0x153217(0x1ca)](0x10)[_0x153217(0x127)](0x2,'0'))[_0x153217(0x1a5)](''),log(_0x153217(0x1f1)+JSON[_0x153217(0x20e)](_0x3d94d9));break;case _0x27c34c[_0x153217(0x1b2)]:_0x482ed6[_0x153217(0x1f9)]=_0x3d94d9[0x0];break;case _0x27c34c[_0x153217(0x132)]:log(_0x153217(0x1e4)+JSON[_0x153217(0x20e)](_0x482ed6[_0x153217(0x16f)]));break;case _0x27c34c[_0x153217(0x1c3)]:log(_0x153217(0x153)+JSON[_0x153217(0x20e)](_0x3d94d9[0x0])),_0x482ed6[_0x153217(0x16f)]=_0x3d94d9[0x0];break;case _0x27c34c[_0x153217(0x1fe)]:log(_0x153217(0x1d2)+JSON['stringify'](_0x3d94d9[0x0])),_0x482ed6['gstate']={};break;case _0x27c34c[_0x153217(0x1d8)]:log(_0x153217(0x1b9)+JSON[_0x153217(0x20e)](_0x3d94d9)),_0x482ed6[_0x153217(0x1d8)]=_0x3d94d9;break;case _0x27c34c[_0x153217(0x1fc)]:log(_0x153217(0x14c)+JSON['stringify'](_0x3d94d9)),_0x482ed6['path']=_0x3d94d9;break;case _0x27c34c[_0x153217(0x152)]:_0x482ed6[_0x153217(0x152)][_0x153217(0x207)](_0x482ed6[_0x153217(0x179)]);break;default:log('\x20\x20\x20\x20?'+_0x6760d9+'\x20-\x20'+JSON[_0x153217(0x20e)](_0x3d94d9));break;}}if(_0x8975ab||_0x2a33c0+0x3<0xb)_0x562860+=0x1;for(const _0x23cf19 of _0x37bdf5){const _0x47c34a=_0x23cf19[_0x153217(0x18f)],_0x5d95a7=_0x47c34a[_0x153217(0x20f)]('g_')?_0x379152['commonObjs']:_0x379152['objs'],_0x57ac3f=new Promise(_0x4b445a=>_0x5d95a7[_0x153217(0x1d6)](_0x47c34a,_0x4e3dd5=>_0x4b445a(_0x4e3dd5))),_0x5816dc=await _0x57ac3f;let _0x3475c9=__name(async _0x2f0c95=>{},'renderToCanvasFn');if(_0x5816dc[_0x153217(0x121)]!==void 0x0)_0x3475c9=__name(async _0x32d7ff=>{const _0x12a4cb=_0x153217,_0x2fd524=await _0x4b0578(_0x5816dc['src']);_0x32d7ff[_0x12a4cb(0x14f)](_0x2fd524,0x0,0x0,_0x5816dc[_0x12a4cb(0x186)],_0x5816dc[_0x12a4cb(0x188)]);},'renderToCanvasFn');else{if(_0x5816dc[_0x153217(0x1bf)]===0x3)_0x3475c9=__name(async _0x4f16fe=>{const _0x4bf3f0=_0x153217,_0x3450cd=_0x4f16fe[_0x4bf3f0(0x20c)](_0x5816dc[_0x4bf3f0(0x186)],_0x5816dc['height']),_0x534496=_0x3450cd[_0x4bf3f0(0x154)];_0x534496[_0x4bf3f0(0x164)](_0x5816dc[_0x4bf3f0(0x154)],0x0),_0x4f16fe['putImageData'](_0x3450cd,0x0,0x0);},_0x153217(0x1e7));else{if(_0x5816dc['kind']===0x2)_0x3475c9=__name(async _0x4c76b1=>{const _0x26a3a7=_0x153217,_0x50d661=_0x4c76b1[_0x26a3a7(0x20c)](_0x5816dc[_0x26a3a7(0x186)],_0x5816dc[_0x26a3a7(0x188)]),_0xf3e903=_0x50d661[_0x26a3a7(0x154)];for(let _0x296ae3=0x0,_0x2c4939=0x0;_0x296ae3<_0x5816dc[_0x26a3a7(0x154)][_0x26a3a7(0x14a)];_0x296ae3+=0x3,_0x2c4939+=0x4){_0xf3e903[_0x2c4939]=_0x5816dc[_0x26a3a7(0x154)][_0x296ae3],_0xf3e903[_0x2c4939+0x1]=_0x5816dc[_0x26a3a7(0x154)][_0x296ae3+0x1],_0xf3e903[_0x2c4939+0x2]=_0x5816dc[_0x26a3a7(0x154)][_0x296ae3+0x2],_0xf3e903[_0x2c4939+0x3]=0xff;}_0x4c76b1['putImageData'](_0x50d661,0x0,0x0);},_0x153217(0x1e7));else _0x5816dc[_0x153217(0x21a)]!==void 0x0?_0x3475c9=__name(async _0x48306f=>{const _0x4a29be=_0x153217;_0x48306f[_0x4a29be(0x14f)](_0x5816dc[_0x4a29be(0x21a)],0x0,0x0,_0x5816dc[_0x4a29be(0x186)],_0x5816dc['height']);},_0x153217(0x1e7)):console[_0x153217(0x14b)](_0x153217(0x19b));}}const _0x2a2f41=__name(async(_0x49327a,_0x47b689,_0x4beb2a,_0x445674,_0xed1541,_0x5ed590,_0x1b919e)=>{const _0x56d26f=_0x153217;let _0x34ecf5=_0x44b372(_0x5816dc['width'],_0x5816dc['height']);const _0x2dea93=_0x34ecf5[_0x56d26f(0x1b5)]('2d');await _0x3475c9(_0x2dea93);if(_0x4beb2a!==void 0x0&&_0x445674!==void 0x0&&_0xed1541!==void 0x0&&_0x5ed590!==void 0x0){const _0x32a3a0=_0xed1541-_0x4beb2a,_0x10f678=_0x5ed590-_0x445674,_0x15c7e6=_0x44b372(_0x32a3a0,_0x10f678),_0x367b68=_0x15c7e6[_0x56d26f(0x1b5)]('2d');_0x367b68[_0x56d26f(0x16c)]=_0x56d26f(0x1c0),_0x367b68[_0x56d26f(0x19e)](0x0,0x0,_0x15c7e6[_0x56d26f(0x186)],_0x15c7e6['height']),_0x367b68[_0x56d26f(0x14f)](_0x34ecf5,_0x4beb2a,_0x445674,_0x32a3a0,_0x10f678,0x0,0x0,_0x32a3a0,_0x10f678),_0x34ecf5=_0x15c7e6;}if(_0x1b919e!==void 0x0&&_0x1b919e!==0x0){let _0x4bbecb=_0x34ecf5[_0x56d26f(0x186)],_0x34ae16=_0x34ecf5[_0x56d26f(0x188)];_0x1b919e%0x2!==0x0&&([_0x4bbecb,_0x34ae16]=[_0x34ae16,_0x4bbecb]);const _0x2104e1=_0x44b372(_0x4bbecb,_0x34ae16),_0x48b25f=_0x2104e1['getContext']('2d');_0x48b25f['fillStyle']=_0x56d26f(0x1c0),_0x48b25f[_0x56d26f(0x19e)](0x0,0x0,_0x2104e1[_0x56d26f(0x186)],_0x2104e1[_0x56d26f(0x188)]),_0x48b25f[_0x56d26f(0x165)](),_0x48b25f[_0x56d26f(0x206)](_0x4bbecb/0x2,_0x34ae16/0x2),_0x48b25f[_0x56d26f(0x16b)](_0x1b919e*Math['PI']/0x2),_0x48b25f[_0x56d26f(0x14f)](_0x34ecf5,-_0x34ecf5[_0x56d26f(0x186)]/0x2,-_0x34ecf5[_0x56d26f(0x188)]/0x2),_0x48b25f[_0x56d26f(0x17c)](),_0x34ecf5=_0x2104e1;}if(_0x49327a!==void 0x0&&_0x47b689!==void 0x0&&_0x49327a!==_0x5816dc[_0x56d26f(0x186)]&&_0x47b689!==_0x5816dc[_0x56d26f(0x188)]){const _0x38b10d=_0x44b372(_0x49327a,_0x47b689),_0x574eb1=_0x38b10d['getContext']('2d');_0x574eb1[_0x56d26f(0x16c)]=_0x56d26f(0x1c0),_0x574eb1[_0x56d26f(0x19e)](0x0,0x0,_0x38b10d[_0x56d26f(0x186)],_0x38b10d[_0x56d26f(0x188)]),_0x574eb1[_0x56d26f(0x14f)](_0x34ecf5,0x0,0x0,_0x38b10d[_0x56d26f(0x186)],_0x38b10d['height']),_0x34ecf5=_0x38b10d;}return _0x34ecf5;},_0x153217(0x1ef)),_0x362bd2=ensureId(_0x198638,_0x3e5345=>_0x2a33c0+':'+JSON[_0x153217(0x20e)](_0x23cf19[_0x153217(0x1d8)])+(_0x3e5345>0x0?':'+_0x3e5345:''));_0x1ad58f[_0x153217(0x207)]({'id':btoa(_0x362bd2)[_0x153217(0x192)](/=/g,''),'page':_0x2a33c0,'width':_0x5816dc[_0x153217(0x186)],'height':_0x5816dc[_0x153217(0x188)],'transform':_0x23cf19[_0x153217(0x1d8)],'gstate':_0x23cf19[_0x153217(0x16f)],'clip':_0x23cf19['clip'],'getImageCanvas':_0x2a2f41});}}{for(const _0x23ba8c of _0x4837fd){log(_0x23ba8c[_0x153217(0x139)]+'\x20('+_0x23ba8c['x']+',\x20'+_0x23ba8c['y']+')\x20\x22'+_0x23ba8c[_0x153217(0x15c)]+'\x22');}}return new PdfData({'textDetails':_0x4837fd,'imageDetails':_0x1ad58f});}__name(parsePdf,_0x42d9e8(0x18e));function ensureId(_0xf2cca,_0x465614){let _0x336e6d=0x0,_0x48a307;while(!![]){_0x48a307=_0x465614(_0x336e6d);if(!_0xf2cca['has'](_0x48a307))break;_0x336e6d+=0x1;}return _0xf2cca['add'](_0x48a307),_0x48a307;}__name(ensureId,_0x42d9e8(0x159)),_0x39aa0d[_0x42d9e8(0x11b)]=_0x4d9c6f;const readUploadedFileAsBinary=__name(_0x1d9f8c=>{const _0x234455=new FileReader();return new Promise((_0x250ca3,_0x66b911)=>{const _0x5ef948=_0x4f71;_0x234455[_0x5ef948(0x155)]=()=>{const _0x1d0c0a=_0x5ef948;_0x234455[_0x1d0c0a(0x11c)](),_0x66b911(new DOMException(_0x1d0c0a(0x12e)));},_0x234455[_0x5ef948(0x1c2)]=()=>{const _0x2d9b63=_0x5ef948;_0x250ca3(_0x234455[_0x2d9b63(0x1a0)]);},_0x234455[_0x5ef948(0x1df)](_0x1d9f8c);});},_0x42d9e8(0x1a3)),readUploadedFileAsText=__name(_0xb22c4c=>{const _0x4f26e4=new FileReader();return new Promise((_0x3f237d,_0x470efc)=>{const _0x46cc79=_0x4f71;_0x4f26e4[_0x46cc79(0x155)]=()=>{const _0x4ce1f2=_0x46cc79;_0x4f26e4[_0x4ce1f2(0x11c)](),_0x470efc(new DOMException('Problem\x20parsing\x20input\x20file.'));},_0x4f26e4[_0x46cc79(0x1c2)]=()=>{const _0x356692=_0x46cc79;_0x3f237d(_0x4f26e4[_0x356692(0x1a0)]);},_0x4f26e4[_0x46cc79(0x1d4)](_0xb22c4c);});},_0x42d9e8(0x126));function progressFn(_0x5a2b2e,_0x180328){const _0xf6df13=_0x42d9e8,_0x3b85cc=document[_0xf6df13(0x1d0)]('loading'),_0x6cec05=Math[_0xf6df13(0x1cd)](0x64*_0x180328,0x0,0x64);_0x3b85cc['querySelector'](_0xf6df13(0x150))[_0xf6df13(0x161)]=_0x5a2b2e,_0x3b85cc['querySelector'](_0xf6df13(0x1ed))['style'][_0xf6df13(0x186)]=_0x6cec05+'%',_0x3b85cc['querySelector'](_0xf6df13(0x197))[_0xf6df13(0x161)]='',_0x3b85cc[_0xf6df13(0x1e3)]['display']=_0xf6df13(0x166);if(_0x180328===0x1&&!_0x3b85cc[_0xf6df13(0x1cf)])$(_0x3b85cc)['fadeOut'](0x1388);}__name(progressFn,'progressFn');async function generateData(_0x4d785c){const _0x5e8603=_0x42d9e8;let _0x21250c;if(_0x4d785c['type']===_0x5e8603(0x1fb)){const _0x311f4d=await readUploadedFileAsText(_0x4d785c);_0x21250c={'textDetails':JSON['parse'](_0x311f4d),'imageDetails':[]};}else{const _0x4f5334=await readUploadedFileAsBinary(_0x4d785c),_0x249de0=new Uint8Array(_0x4f5334);_0x21250c=await parsePdf(_0x249de0,progressFn);}const _0x3903f3=_0x47bd8f(_0x21250c);if(_0x3903f3===void 0x0){progressFn(_0x5e8603(0x217),0x1),postChatMessage(_0x5e8603(0x157));return;}try{const _0xddc06c=new ModuleImporter(_0x3903f3);await _0xddc06c[_0x5e8603(0x11e)](_0x21250c,progressFn);const _0x19462c=_0x5e8603(0x131)+_0x3903f3[_0x5e8603(0x1b3)]+'\x20is\x20complete'+_0xddc06c['additionalMessages'];postChatMessage(_0x19462c);}catch(_0x27931f){progressFn(_0x27931f['message'],0x1),_0x27931f['message']==='Couldn\x27t\x20detect\x20watermark\x20:(.\x20Please\x20no\x20pirate.'?postChatMessage(_0x5e8603(0x1ae)):postChatMessage(_0x5e8603(0x12a)+_0x27931f[_0x5e8603(0x1be)]);}}__name(generateData,'generateData');function _0x4f71(_0x25f5e6,_0x26923e){const _0x200177=_0x2001();return _0x4f71=function(_0x4f7119,_0x3bff0f){_0x4f7119=_0x4f7119-0x111;let _0x374c7e=_0x200177[_0x4f7119];return _0x374c7e;},_0x4f71(_0x25f5e6,_0x26923e);}function postChatMessage(_0x2dd0ab){const _0x2195e4=_0x42d9e8,_0x15d840={'whisper':[game[_0x2195e4(0x17a)]],'content':_0x2dd0ab,'type':0x0,'blind':!![],'speaker':{'alias':_0x2195e4(0x141)}};ChatMessage['create'](_0x15d840,{});}__name(postChatMessage,'postChatMessage');export{generateData};
